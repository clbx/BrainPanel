<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>BrainPanel</title
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <script type="text/javascript" src="{{ url_for('static', filename='script.js') }}"></script>
  <!--
	<script type="text/javascript" src="http://kozea.github.com/pygal.js/javascripts/svg.jquery.js"></script>
  <script type="text/javascript" src="http://kozea.github.com/pygal.js/javascripts/pygal-tooltips.js"></script>
	-->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
	<script src="https://d14fo0winaifog.cloudfront.net/plotly-basic.js"></script>
	<link rel=stylesheet type=text/css href="{{ url_for('static', filename='style.css') }}">

</head>
<body>

	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="navbar-collapse collapse w-100 order-1 order-md-0 dual-collapse2">
      <ul class="navbar-nav mr-auto navbar-nav nav" id="myTab" role="tablist">
				<li class="nav-item">
		 	  	<a class="nav-link active" id="RealTime" data-toggle="tab" href="#realtime" role="tab" aria-controls="home" aria-selected="true">Home</a>
				</li>
		 	  <li class="nav-item">
		 	     <a class="nav-link" id="profile-tab" data-toggle="tab" href="#recorded" role="tab" aria-controls="profile" aria-selected="false">Graphs</a>
		 	  </li>
		 	  <li class="nav-item">
		 	     <a class="nav-link" id="contact-tab" data-toggle="tab" href="#about" role="tab" aria-controls="contact" aria-selected="false">About</a>
		 	  </li>
			</ul>
		</div>
		<div class="mx-auto order-0">
			<a class="navbar-brand mx-auto" href="#">ðŸ§  Brain Panel</a>
		</div>
		<div class="navbar-collapse collapse w-100 order-3 dual-collapse2">
			<ul class="navbar-nav ml-auto">
				<form action="/data" method=post class="form-inline" enctype=multipart/form-data>
      		<p><input class="btn btn-outline-success" type=file name=data_file>
					<input class="btn btn-outline-success" type=submit value=Upload>
    		</form>
				<!--
				<form class="form-inline method=post enctype=multipart/form-data">
					<p><input class="btn btn-outline-success" type=file name=file>
			 		<input class="btn btn-outline-success" type=submit value=Upload>
  			</form>-->
			</ul>
		</div>
	</nav>

<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="realtime" role="tabpanel" aria-labelledby="RealTime-Tab">
		<!-- THE FIRST TAB -->
		<div class="container">
			<div class="row">
				<!-- LEFT SIDE -->
				<div class="col-6">
					{% for id in ids %}
        		<div id="{{id}}"></div>
					{% endfor %}
				</div>
				<!-- RIGHT SIDE -->
				<div class="col-6">
					<!--- TOP RIGHT-->
					<br>
					<div class="row">
						<div class="card" style="width: 35rem;">
  						<div class="card-body">
    						<h5 class="card-title">Quick Statistics</h5>
    						<p class="card-text">
									Times Blinked:    {{ total_blinks }}<br>
									Sylablles Said:   {{ total_syl}}<br>
									Recorded Time:    {{ total_time}}<br>
									Battery Expended: {{ total_batt }}<br>
								</p>
  						</div>
						</div>
					</div>
					<!-- BOTTOM RIGHT -->
					<br>
					<div class="row">
						<div class="card" style="width: 35rem;">
  						<div class="card-body">
    						<h5 class="card-title">Information</h5>
    						<p class="card-text">
									<div class="alert alert-success" role="alert">
  									<b>Your Delta Waves are high:</b> This correlates to relaxation
									</div>
									<div class="alert alert-success" role="alert">
  									<b>Your Gamma Waves are low:</b> This usually means you're not doing much
									</div>
									<div class="alert alert-danger" role="alert">
  									<b>You Moved Around a Lot:</b> If you move your head too much, it can lead to innaccurate readings
									</div>
								</p>
  						</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
  <div class="tab-pane fade" id="recorded" role="tabpanel" aria-labelledby="Recorded-Tab">
    <div class="container">
			<div class="row">
				<div class="column">
					<div class="card" style="width: 35rem;">
						<div class="card-body">
							<h5 class="card-title">More Statistics</h5>
							<p class="card-text">
								<table width="100%">
									<tr>
										<th>Alpha avg: {{alphaAvg}} db</th>
										<th>Beta avg: {{betaAvg}} db</th>
									</tr>
									<tr>
										<th>Delta avg: {{deltaAvg}} db</th>
										<th>Gamma avg: {{gammaAvg}} db</th>
									</tr>
									<tr>
										<th>Theta avg: {{thetaAvg}} db</th>
									</tr>
									<tr>
										<th> </th>
									</tr>
									<tr>
										<th>X Average: {{xAvg}}</th>
										<th>Y Average: {{yAvg}}</th>
										<th>Z Average: {{zAvg}}</th>
									</tr>

								</table>
							</p>
						</div>
					</div>
				</div>

				<div class="column">
					{% for acclid in acclids %}
        		<div id="{{acclid}}"></div>
					{% endfor %}
				</div>
			</div>
			<div class="row">
				<div class="column">
					<!-- COLUMN BOTTOM LEFT -->
				</div>
				<div class="column">
					<!-- COLUMN BOTTOM RIGHT -->
				</div>
			</div>
		</div>
  </div>
  <div class="tab-pane fade" id="about" role="tabpanel" aria-labelledby="About-Tab">
    <div class="container">
			<div class="row">
				<div class="col">
					<br><br><br><br><br><br>
					<font size="128">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspðŸ§ </font><br><b>
						<font size="36">BrainPanel</font></b><br>
					</div>
					<div class="col">
						<br>
						<div class="card" style="width: 35rem;">
							<div class="card-body">
								<h5 class="card-title">Current Features</h5>
								<p class="card-text">
									<ul>
										<li>Statistics & Facts</li>
										<li>Graphs</li>
										<li>Deployable Package</li>
									</ul>
								</p>
							</div>
						</div>
						<br>
						<div class="card" style="width: 35rem;">
							<div class="card-body">
								<h5 class="card-title">To Do:</h5>
								<p class="card-text">
									<ul>
										<li>Real-Time (May be difficult to implement)</li>
										<li>Loading uploaded CSV</li>
									</ul>
								</p>
							</div>
						</div>
						<br>
						<div class="card" style="width: 35rem;">
							<div class="card-body">
								<h5 class="card-title">Bugs:</h5>
								<p class="card-text">
									<ul>
										<li>Timings do not always show up</li>
										<li>Facts can be off or go off screen</li>
									</ul>
								</p>
							</div>
						</div>
						<br>
						<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
  						Technical Specifications
						</button>
						<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
						  <div class="modal-dialog modal-xl" role="document">
						    <div class="modal-content">
						      <div class="modal-header">
						        <h5 class="modal-title" id="exampleModalLabel">Technical Specifications</h5>
						        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
						          <span aria-hidden="true">&times;</span>
						        </button>
						      </div>
						      <div class="modal-body">
						        BrainPanel runs off Python 3.6.x
										<div class="container">
											<div class="row">
												<div class="col">
													Dependancies:
													<ul>
														<li>Python 3.6.x</li>
														<li>Flask 0.12.2+</li>
														<li>plotly 2.5.1+</li>
														<li>pandas 0.22.0+</li>
														<li>numpy 1.14.2+</li>

														<br><br><br>
														<a href="https://github.com/clbx/BrainPanel">Github Repository</a>
												</div>
												<div class="col">
													<b>To run BrainPanel</b>
													To run brain panel a python virtual enviroment is <i>required</i><br>
													After cloning the Repository, start the virtualenv by running <code>source bin/activate</code><br>
													Flask will now be running on 127.0.0.1:5000<br><br>
													<b>To deploy BrainPanel</b><br>
													gunicorn is used to deploy BrainPanel. Set nginx root to proxy from 127.0.0.1:3000 and static to flasks static folder.<br>
													After configuring nginx, run <br><code>gunicord -w 4 -b 127.0.0.1:3000 getdata:app</code>
												</div>
											</div>
										</div>
						      </div>
						      <div class="modal-footer">
						        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
						      </div>
						    </div>
						  </div>
						</div>
					</div>
			</div>
		</div>
  </div>
</div>




</body>

<footer>
	<script type="text/javascript">
		var graphs = {{graphJSON | safe}};
		var ids = {{ids | safe}};
		for(var i in graphs) {
			Plotly.plot(ids[i], // the ID of the div, created above
				graphs[i].data,
				graphs[i].layout || {});
		}
	</script>
</footer>
</html>
